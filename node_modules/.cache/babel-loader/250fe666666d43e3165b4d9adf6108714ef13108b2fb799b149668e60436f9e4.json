{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import WeatherInfo from\"./WeatherInfo\";import WeatherForecast from\"./WeatherForecast\";import axios from\"axios\";import\"./Weather.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Weather(props){const[weatherData,setWeatherData]=useState({ready:false});const[city,setCity]=useState(props.defaultCity);const[inputCity,setInputCity]=useState(props.defaultCity);// Define search function\nconst search=()=>{const apiKey=\"97f8e93f00107773f88eafd933ce86b7\";let apiUrl=\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(city,\"&appid=\").concat(apiKey,\"&units=metric\");axios.get(apiUrl).then(handleResponse).catch(error=>{console.error(\"Error fetching weather data: \",error);});};useEffect(()=>{search();// Call search function here\n// Since search is defined outside useEffect and used inside, include it in the dependency array\n},[search,city]);// Include 'search' and 'city' in the dependency array\nfunction handleResponse(response){setWeatherData({ready:true,coordinates:response.data.coord,temperature:response.data.main.temp,humidity:response.data.main.humidity,date:new Date(response.data.dt*1000),description:response.data.weather[0].description,icon:response.data.weather[0].icon,wind:response.data.wind.speed,city:response.data.name});}function handleSubmit(event){event.preventDefault();setCity(inputCity);// Update city state with inputCity\n}function handleCityChange(event){setInputCity(event.target.value);// Update inputCity state with input value\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"Weather\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Enter a city..\",className:\"form-control search-input\",value:inputCity,onChange:handleCityChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",children:\"Search\"})})]})}),weatherData.ready?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(WeatherInfo,{data:weatherData}),/*#__PURE__*/_jsx(WeatherForecast,{coordinates:weatherData.coordinates})]}):/*#__PURE__*/_jsx(\"div\",{className:\"Weather-loading\",children:\"Loading...\"})]});}","map":{"version":3,"names":["React","useState","useEffect","WeatherInfo","WeatherForecast","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Weather","props","weatherData","setWeatherData","ready","city","setCity","defaultCity","inputCity","setInputCity","search","apiKey","apiUrl","concat","get","then","handleResponse","catch","error","console","response","coordinates","data","coord","temperature","main","temp","humidity","date","Date","dt","description","weather","icon","wind","speed","name","handleSubmit","event","preventDefault","handleCityChange","target","value","className","children","onSubmit","type","placeholder","onChange"],"sources":["/Users/magdalenazyglewicz/Documents/SheCodes/SheCodes React/React-Week-5/src/Weather.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport WeatherInfo from \"./WeatherInfo\";\nimport WeatherForecast from \"./WeatherForecast\";\nimport axios from \"axios\";\nimport \"./Weather.css\";\n\nexport default function Weather(props) {\n  const [weatherData, setWeatherData] = useState({ ready: false });\n  const [city, setCity] = useState(props.defaultCity);\n  const [inputCity, setInputCity] = useState(props.defaultCity);\n\n  // Define search function\n  const search = () => {\n    const apiKey = \"97f8e93f00107773f88eafd933ce86b7\";\n    let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;\n\n    axios\n      .get(apiUrl)\n      .then(handleResponse)\n      .catch((error) => {\n        console.error(\"Error fetching weather data: \", error);\n      });\n  };\n\n  useEffect(() => {\n    search(); // Call search function here\n\n    // Since search is defined outside useEffect and used inside, include it in the dependency array\n  }, [search, city]); // Include 'search' and 'city' in the dependency array\n\n  function handleResponse(response) {\n    setWeatherData({\n      ready: true,\n      coordinates: response.data.coord,\n      temperature: response.data.main.temp,\n      humidity: response.data.main.humidity,\n      date: new Date(response.data.dt * 1000),\n      description: response.data.weather[0].description,\n      icon: response.data.weather[0].icon,\n      wind: response.data.wind.speed,\n      city: response.data.name,\n    });\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    setCity(inputCity); // Update city state with inputCity\n  }\n\n  function handleCityChange(event) {\n    setInputCity(event.target.value); // Update inputCity state with input value\n  }\n\n  return (\n    <div className=\"Weather\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"row\">\n          <div className=\"col-9\">\n            <input\n              type=\"search\"\n              placeholder=\"Enter a city..\"\n              className=\"form-control search-input\"\n              value={inputCity}\n              onChange={handleCityChange}\n            />\n          </div>\n          <div className=\"col-3\">\n            <button type=\"submit\" className=\"btn btn-primary w-100\">\n              Search\n            </button>\n          </div>\n        </div>\n      </form>\n      {weatherData.ready ? (\n        <>\n          <WeatherInfo data={weatherData} />\n          <WeatherForecast coordinates={weatherData.coordinates} />\n        </>\n      ) : (\n        <div className=\"Weather-loading\">Loading...</div>\n      )}\n     \n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}